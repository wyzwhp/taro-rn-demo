const INITIAL_STATE = {
    list: [],
    group: [{ h: 0, list: [] }, { h: 0, list: [] }],
}
import { updateStateParams } from '../../typings/request'
export default function (state: any = INITIAL_STATE, action: updateStateParams) {
    switch (action.type) {
        case 'setVideoList':
            console.log(action)
            action.payload.items=[{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/09/1599632166887-yJWJNsfRha.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"其实人生就像一场游戏一场梦，每一次失败的恋爱，都为了最终遇见对的人经典老歌","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/09/1599632166955-PKnb5Nw55d.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/16/Java/765df9ef-a26d-471a-8995-6d0964dc162e_20200716143101.jpg","id":155196,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":32,"publishTime":1599632184000,"readNum":2637,"status":0,"videoType":16,"wisId":136336,"wisName":"唯美时尚圈"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/08/1599533023429-N5mkNfb76T.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"如果别人说你不胖，意思就是你真的胖","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/08/1599533023508-Z2zAhFC2cG.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/16/Java/6846fb30-6c85-4818-ad92-ab86124e9dfd_20200716131059.jpg","id":144400,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":29,"publishTime":1599533031000,"readNum":4038,"status":0,"videoType":12,"wisId":136342,"wisName":"家常美食大咖"},{"auditStatus":1,"commentNum":1,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/25/1600997341610-wktQAzhmFa.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"童谣七色光by安安老师你知道，光能折射成我们肉眼可见的7种颜色吗都有哪几种颜色呢","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/25/1600997341791-HtTwMd2HcW.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/03/Java/8009759e-63fb-4de4-b7a7-93ccd3420320_20200703171400.jpg","id":241833,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":45,"publishTime":1601017250000,"readNum":8979,"status":0,"videoType":15,"wisId":136219,"wisName":"潮人说"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/07/1599466571473-F62z2QPnBF.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"男孩子要么帅一点要么暖一点，如果又帅又暖那就可以拽一点maria华莎maria","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/07/1599466571559-5ykfJJCSaQ.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/16/Java/3c20a8d8-3919-49a8-a91a-8ceb2d5cc118_20200716131617.jpg","id":141857,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":84,"publishTime":1599466511000,"readNum":6147,"status":0,"videoType":12,"wisId":136357,"wisName":"乡村里的琐事"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/06/18/1592451948697-cNcD4PksXh.jpg","coverUrlHeight":576,"coverUrlWeight":1024,"docTitle":"DDC速度，2018年跳绳世界杯赛前魔鬼训练，中国队加油！","docUrl":"http://videofile.hybbtree.com/h5/task/2020/06/18/1592451948697-cNcD4PksXh.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/06/19/Java/1dde4f28-e1ab-430f-ad34-532ab0218435_20200619101358.jpg","id":4,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":25,"publishTime":1592452170000,"readNum":2134,"status":0,"videoType":6,"wisId":136171,"wisName":"智慧树直播"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/07/1599466770795-zDKJDj3MBe.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"难怪糖宝不羽化，原来我们把它挂反了变成蝴蝶后它吃什么？谁知道啊","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/07/1599466770937-8Wack7yCaQ.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/16/Java/3c20a8d8-3919-49a8-a91a-8ceb2d5cc118_20200716131617.jpg","id":141874,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":61,"publishTime":1599466701000,"readNum":6245,"status":0,"videoType":12,"wisId":136357,"wisName":"乡村里的琐事"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/07/29/1595986175599-pxMGbMpip6.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"小手准备，红气球绿气球手指操来了，长长尾巴圆圆头，好像只只小蝌蚪边念儿歌边做手指游戏，宝宝更聪明","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/07/29/1595986175693-hGTHnam877.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/03/Java/aba70a6a-e066-4695-8ef2-ee3501b1b849_20200703170714.jpeg","id":85820,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":21,"publishTime":1595986519000,"readNum":5926,"status":0,"videoType":2,"wisId":136216,"wisName":"快乐高中生"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/07/03/1593783939689-xizy6YwQ46.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"家有萌娃哥哥不是想坑你，实在是忍不住，哈哈哈","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/07/03/1593783939747-GG5t8JShwp.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/03/Java/3ae0c671-9272-492d-9b17-ebf3969339e6_20200703161821.jpg","id":154,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":61,"publishTime":1593784022000,"readNum":5685,"status":0,"videoType":7,"wisId":136186,"wisName":"奶妈小学院"},{"auditStatus":1,"commentNum":0,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/09/25/1600995592987-AFbfGEEAna.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"育儿舞蹈提升宝宝安全意识，从这个舞蹈开始，爸爸妈妈快带宝宝学起来吧","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/09/25/1600995593067-GrHfSerRfb.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/16/Java/58221c1a-972f-4c00-9545-efb97dd86de5_20200716142626.jpg","id":241800,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":43,"publishTime":1600995590000,"readNum":8860,"status":0,"videoType":16,"wisId":136321,"wisName":"体育新视觉"},{"auditStatus":0,"commentNum":1,"coverUrl":"http://videofile.hybbtree.com/h5/task/2020/08/05/1596614018939-kStWpMdT5A.jpg","coverUrlHeight":1024,"coverUrlWeight":576,"docTitle":"小萌娃小家伙虽然生病了，但是也抵挡不住跳舞的热情","docUrl":"http://videofile.hybbtree.com/h5/mp/2020/08/05/1596614018999-j3xQdtPTAt.mp4","headSculptureUrl":"http://filesystem1.hybbtree.com/2020/07/03/Java/b3eec09b-b3a6-4658-8299-c956f072b39a_20200703165156.jpg","id":125619,"isRecommend":1,"isTop":0,"liveId":0,"praiseNum":30,"publishTime":1596614045000,"readNum":3925,"status":0,"videoType":3,"wisId":136313,"wisName":"娱乐小小贩"}]
            if (action.payload.items) {
                const group = [{ h: 0, list: [] }, { h: 0, list: [] }];
                action.payload.items.forEach((item: any, index: number) => {
                    const h = item.coverUrlHeight * 351 / item.coverUrlWeight
                    if (group[0].h > group[1].h) {
                        group[1].h += h
                        group[1].list.push({ index: index + state.list.length, item: { ...item, height: h, width: 351 } })
                    } else {
                        group[0].h += h
                        group[0].list.push({ index: index + state.list.length, item: { ...item, height: h, width: 351 } })
                    }
                })
                const list = action.payload.items
                return {
                    ...state,
                    list,
                    group
                }
            }
            return state;
        default:
            return state
    }
}
